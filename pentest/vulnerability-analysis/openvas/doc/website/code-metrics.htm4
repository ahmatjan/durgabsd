m4_dnl -*-html-*-
m4_include(`template.m4')
m4_define(`EN')
m4_define(`TITLE', `Code Metrics')
m4_define(`MAIN', `development')

m4_dnl OpenVAS
m4_dnl $Id$
m4_dnl Description: Summary on code metrics of the OpenVAS modules including trends over time.
m4_dnl
m4_dnl Authors:
m4_dnl Jan-Oliver Wagner <jan-oliver.wagner@intevation.de>
m4_dnl
m4_dnl Copyright:
m4_dnl Copyright (C) 2008 Intevation GmbH
m4_dnl
m4_dnl This program is free software; you can redistribute it and/or
m4_dnl modify it under the terms of the GNU General Public License
m4_dnl as published by the Free Software Foundation; either version 2
m4_dnl of the License, or (at your option) any later version.
m4_dnl
m4_dnl This program is distributed in the hope that it will be useful,
m4_dnl but WITHOUT ANY WARRANTY; without even the implied warranty of
m4_dnl MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
m4_dnl GNU General Public License for more details.
m4_dnl
m4_dnl You should have received a copy of the GNU General Public License
m4_dnl along with this program; if not, write to the Free Software
m4_dnl Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.

PAGE_START

<h2>Code metrics of OpenVAS modules with trends</h2>

<p>
The OpenVAS developer team is very much concerned with source code
quality. This page summarizes analysis of the quality as a base
for planning improvements strategies. Note, that simple counter heuristics
are only one element of a quality strategy.
</p>

<p>
Applied tools:
</p>

<ul>
<li> <a href="http://www.dwheeler.com/flawfinder/">flawfinder</a> 1.26
     by David Wheeler.
<li> <a href="http://www.fortify.com/security-resources/rats.jsp">RATS</a> 2.0:<br>
     <pre>rats . | grep "High:" | wc -l</pre><br>
     <pre>rats . | grep "Medium:" | wc -l</pre>
<li> gcc -Wall (gcc 4.1.2, Intel P4):
     <pre>$ make  2>&1 | grep "warning:"  | wc -l</pre>
</ul>

<p>
Furthermore, some information (e.g. code/comment ratio) can be found on <a href="http://www.ohloh.net/p/openvas/analyses/latest">the ohloh page of OpenVAS</a>.
</p>

<p>
Note: You should make yourself familiar with the applied tools especially
before interpreting the absolute numbers. The trends of the numbers
give a first impression, but for deeper understanding you should read
more about the applied methods as well.
</p>

<h3>openvas-libraries</h3>

<table>
<tr>
  <th align="left">Release</th>
  <th align="left">Flawfinder SLOC</th>
  <th align="left">Flawfinder Hits</th>
  <th align="left">RATS Hi/Med</th>
  <th align="left">gcc -Wall</th>
</tr>
<tr>
  <td>0.9.0</td>
  <td>13909</td>
  <td>484</td>
  <td>not analyzed</td>
  <td>37</td>
</tr>
<tr>
  <td>0.9.1</td>
  <td>13853</td>
  <td>483</td>
  <td>not analyzed</td>
  <td>20</td>
</tr>
<tr>
  <td>1.0.0</td>
  <td>13755</td>
  <td>476</td>
  <td>not analyzed</td>
  <td>10</td>
</tr>
<tr>
  <td>1.0.1</td>
  <td>11729</td>
  <td>380</td>
  <td>114/27</td>
  <td>3</td>
</tr>
<tr>
  <td>1.0.2</td>
  <td>11752</td>
  <td>377</td>
  <td>114/27</td>
  <td>3</td>
</tr>
<tr>
  <td>1.0.3</td>
  <td>11898</td>
  <td>375</td>
  <td>114/27</td>
  <td>3</td>
</tr>
<tr>
  <td>2.0-beta1</td>
  <td>11819</td>
  <td>376</td>
  <td>102/27</td>
  <td>3</td>
</tr>
<tr>
  <td>2.0-beta2</td>
  <td>11200</td>
  <td>368</td>
  <td>93/26</td>
  <td>3</td>
</tr>
<tr>
  <td>2.0-rc1</td>
  <td>11254</td>
  <td>317</td>
  <td>84/13</td>
  <td>3</td>
</tr>
<tr>
  <td>2.0.0</td>
  <td>11255</td>
  <td>311</td>
  <td>84/13</td>
  <td>3</td>
</tr>
<tr>
  <td>2.0.1</td>
  <td>11248</td>
  <td>295</td>
  <td>76/13</td>
  <td>3</td>
</tr>
<tr>
  <td>2.0.2</td>
  <td>11384</td>
  <td>295</td>
  <td>76/13</td>
  <td>3</td>
</tr>
<tr>
  <td>2.0.3</td>
  <td>12401</td>
  <td>305</td>
  <td>76/13</td>
  <td>3</td>
</tr>
<tr>
  <td>2.0.4</td>
  <td>12597</td>
  <td>304</td>
  <td>76/13</td>
  <td>4</td>
</tr>
<tr>
  <td colspan="5">openvas-libnasl merged into openvas-libraries. Now, flawfinder 1.27 is used.
    New libraries "omp" and "base" were added.</td>
</tr>
<tr>
  <td>3.1.0</td>
  <td>62263</td>
  <td>825</td>
  <td>203/33</td>
  <td>10</td>
</tr>
</table>

<h3>openvas-scanner</h3>

<p>
openvas-scanner is the successor of openvas-server.
All C modules of openvas-plugins as well as management
scripts of openvas-plugins were integrated here.
flawfinder 1.27 was applied.
</p>

<table>
<tr>
  <th align="left">Release</th>
  <th align="left">Flawfinder SLOC</th>
  <th align="left">Flawfinder Hits</th>
  <th align="left">RATS Hi/Med</th>
  <th align="left">gcc -Wall</th>
</tr>
<tr>
  <td>3.1.0</td>
  <td>20951</td>
  <td>605</td>
  <td>166/25</td>
  <td>n.a.</td>
</tr>
</table>

<h3>openvas-libnasl</h3>

<table>
<tr>
  <th align="left">Release</th>
  <th align="left">Flawfinder SLOC</th>
  <th align="left">Flawfinder Hits</th>
  <th align="left">RATS Hi/Med</th>
  <th align="left">gcc -Wall</th>
</tr>
<tr>
  <td>0.9.0</td>
  <td>16034</td>
  <td>342</td>
  <td>not analyzed</td>
  <td>not analyzed</td>
</tr>
<tr>
  <td>0.9.1</td>
  <td>16013</td>
  <td>342</td>
  <td>not analyzed</td>
  <td>not analyzed</td>
</tr>
<tr>
  <td>0.9.2</td>
  <td>16051</td>
  <td>343</td>
  <td>not analyzed</td>
  <td>not analyzed</td>
</tr>
<tr>
  <td>1.0.0</td>
  <td>16052</td>
  <td>343</td>
  <td>64/21</td>
  <td>not analyzed</td>
</tr>
<tr>
  <td>1.0.1</td>
  <td>16077</td>
  <td>331</td>
  <td>62/21</td>
  <td>not analyzed</td>
</tr>
<tr>
  <td>2.0-beta1</td>
  <td>16078</td>
  <td>330</td>
  <td>61/21</td>
  <td>not analyzed</td>
</tr>
<tr>
  <td>2.0-beta2</td>
  <td>16422</td>
  <td>339</td>
  <td>62/22</td>
  <td>not analyzed</td>
</tr>
<tr>
  <td>2.0-rc1</td>
  <td>16437</td>
  <td>290</td>
  <td>61/21</td>
  <td>not analyzed</td>
</tr>
<tr>
  <td>2.0.0</td>
  <td>15524</td>
  <td>265</td>
  <td>54/15</td>
  <td>not analyzed</td>
</tr>
<tr>
  <td>2.0.1</td>
  <td>15525</td>
  <td>256</td>
  <td>48/15</td>
  <td>not analyzed</td>
</tr>
<tr>
  <td>2.0.2</td>
  <td>15539</td>
  <td>258</td>
  <td>48/15</td>
  <td>not analyzed</td>
</tr>
</table>

<h3>openvas-server</h3>

<table>
<tr>
  <th align="left">Release</th>
  <th align="left">Flawfinder SLOC</th>
  <th align="left">Flawfinder Hits</th>
  <th align="left">RATS Hi/Med</th>
  <th align="left">gcc -Wall</th>
</tr>
<tr>
  <td>0.9.0</td>
  <td>10403</td>
  <td>457</td>
  <td>not analyzed</td>
  <td>not analyzed</td>
</tr>
<tr>
  <td>0.9.1</td>
  <td>10366</td>
  <td>457</td>
  <td>not analyzed</td>
  <td>not analyzed</td>
</tr>
<tr>
  <td>0.9.2</td>
  <td>10366</td>
  <td>457</td>
  <td>125/24</td>
  <td>not analyzed</td>
</tr>
<tr>
  <td>1.0.0</td>
  <td>10354</td>
  <td>457</td>
  <td>125/24</td>
  <td>not analyzed</td>
</tr>
<tr>
  <td>1.0.1</td>
  <td>10093</td>
  <td>433</td>
  <td>124/21</td>
  <td>not analyzed</td>
</tr>
<tr>
  <td>1.0.2</td>
  <td>10087</td>
  <td>433</td>
  <td>124/21</td>
  <td>not analyzed</td>
</tr>
<tr>
  <td>2.0-beta1</td>
  <td>9536</td>
  <td>383</td>
  <td>100/19</td>
  <td>not analyzed</td>
</tr>
<tr>
  <td>2.0-beta2</td>
  <td>9384</td>
  <td>381</td>
  <td>93/19</td>
  <td>not analyzed</td>
</tr>
<tr>
  <td>2.0-rc1</td>
  <td>9527</td>
  <td>367</td>
  <td>93/16</td>
  <td>not analyzed</td>
</tr>
<tr>
  <td>2.0.0</td>
  <td>9365</td>
  <td>361</td>
  <td>93/16</td>
  <td>not analyzed</td>
</tr>
<tr>
  <td>2.0.1</td>
  <td>9496</td>
  <td>333</td>
  <td>86/16</td>
  <td>not analyzed</td>
</tr>
<tr>
  <td>2.0.2</td>
  <td>9809</td>
  <td>324</td>
  <td>86/16</td>
  <td>not analyzed</td>
</tr>
<tr>
  <td>2.0.3</td>
  <td>9723</td>
  <td>316</td>
  <td>86/16</td>
  <td>not analyzed</td>
</tr>
</table>

<h3>openvas-plugins</h3>

<table>
<tr>
  <th align="left">Release</th>
  <th align="left">Flawfinder SLOC</th>
  <th align="left">Flawfinder Hits</th>
  <th align="left">RATS Hi/Med</th>
  <th align="left">gcc -Wall</th>
</tr>
<tr>
  <td>0.9.1</td>
  <td>6904</td>
  <td>412</td>
  <td>not analyzed</td>
  <td>not analyzed</td>
</tr>
<tr>
  <td>1.0.1</td>
  <td>6904</td>
  <td>412</td>
  <td>128/20</td>
  <td>not analyzed</td>
</tr>
<tr>
  <td>1.0.2</td>
  <td>6668</td>
  <td>401</td>
  <td>126/18</td>
  <td>not analyzed</td>
</tr>
<tr>
  <td>1.0.3</td>
  <td>6730</td>
  <td>375</td>
  <td>126/18</td>
  <td>not analyzed</td>
</tr>
<tr>
  <td>1.0.4</td>
  <td>6384</td>
  <td>375</td>
  <td>126/16</td>
  <td>not analyzed</td>
</tr>
<tr>
  <td>1.0.5</td>
  <td>6300</td>
  <td>374</td>
  <td>125/16</td>
  <td>not analyzed</td>
</tr>
<tr>
  <td>1.0.6</td>
  <td>6005</td>
  <td>303</td>
  <td>104/12</td>
  <td>not analyzed</td>
</tr>
<tr>
  <td>1.0.7</td>
  <td>6005</td>
  <td>303</td>
  <td>106/12</td>
  <td>not analyzed</td>
</tr>
</table>

<h3>OpenVAS-Client</h3>

<table>
<tr>
  <th align="left">Release</th>
  <th align="left">Flawfinder SLOC</th>
  <th align="left">Flawfinder Hits</th>
  <th align="left">RATS Hi/Med</th>
  <th align="left">gcc -Wall</th>
</tr>
<tr>
  <td>0.9.1</td>
  <td>51695</td>
  <td>868</td>
  <td>not analyzed</td>
  <td>23</td>
</tr>
<tr>
  <td>1.0.0</td>
  <td>51679</td>
  <td>867</td>
  <td>not analyzed</td>
  <td>23</td>
</tr>
<tr>
  <td>1.0.1</td>
  <td>51648</td>
  <td>862</td>
  <td>not analyzed</td>
  <td>23</td>
</tr>
<tr>
  <td>1.0.2</td>
  <td>51648</td>
  <td>862</td>
  <td>not analyzed</td>
  <td>23</td>
</tr>
<tr>
  <td>1.0.3</td>
  <td>51291</td>
  <td>837</td>
  <td>251/55</td>
  <td>14</td>
</tr>
<tr>
  <td>1.0.4</td>
  <td>50067</td>
  <td>794</td>
  <td>221/55</td>
  <td>22</td>
</tr>
<tr>
  <td>1.0.5</td>
  <td>50173</td>
  <td>794</td>
  <td>221/55</td>
  <td>22</td>
</tr>
<tr>
  <td>2.0-beta1</td>
  <td>27266</td>
  <td>677</td>
  <td>176/47</td>
  <td>13</td>
</tr>
<tr>
  <td>2.0-beta2</td>
  <td>27590</td>
  <td>691</td>
  <td>169/47</td>
  <td>6</td>
</tr>
<tr>
  <td>2.0-rc1</td>
  <td>26983</td>
  <td>659</td>
  <td>164/45</td>
  <td>6</td>
</tr>
<tr>
  <td>2.0.0</td>
  <td>26671</td>
  <td>606</td>
  <td>158/45</td>
  <td>2</td>
</tr>
<tr>
  <td>2.0.1</td>
  <td>26672</td>
  <td>606</td>
  <td>158/45</td>
  <td>2</td>
</tr>
<tr>
  <td>2.0.2</td>
  <td>28795</td>
  <td>599</td>
  <td>154/44</td>
  <td>2</td>
</tr>
<tr>
  <td>2.0.3</td>
  <td>29192</td>
  <td>562</td>
  <td>144/44</td>
  <td>2</td>
</tr>
<tr>
  <td>2.0.4</td>
  <td>30207</td>
  <td>560</td>
  <td>133/43</td>
  <td>2</td>
</tr>
<tr>
  <td>2.0.5</td>
  <td>30594</td>
  <td>532</td>
  <td>133/43</td>
  <td>2</td>
</tr>
<tr>
  <td colspan="5">Now, flawfinder 1.27 is used.</td>
</tr>
<tr>
  <td>3.0.1</td>
  <td>42842</td>
  <td>481</td>
  <td>98/32</td>
  <td>n.a.</td>
</tr>
</table>

<h3>How the numbers have been assembled</h3>

<p>
The actual commands (currently except for RATS) to assemble all the numbers
are collected in a shell script "code-analysis.sh"
which you can find
<a href="http://wald.intevation.org/scm/viewvc.php/trunk/tools/code-analysis.sh?root=openvas">here</a>.
</p>

<h3>For comparison: Nessus</h3>

<p>
This is the analysis of the latest Free Software release of Nessus (Server: 2.2.10, Client: 1.0.2).
</p>

<p>
Naturally, we do not have any such numbers for the proprietary successors.
</p>

<table>
<tr>
  <th align="left">Module</th>
  <th align="left">Release</th>
  <th align="left">Flawfinder SLOC</th>
  <th align="left">Flawfinder Hits</th>
  <th align="left">RATS Hi/Med</th>
  <th align="left">gcc -Wall</th>
</tr>
<tr>
  <td>nessus-libraries</td>
  <td>2.2.10</td>
  <td>21397</td>
  <td>710</td>
  <td>not analyzed</td>
  <td>50</td>
</tr>
<tr>
  <td>libnasl</td>
  <td>2.2.10</td>
  <td>15836</td>
  <td>361</td>
  <td>not analyzed</td>
  <td>34</td>
</tr>
<tr>
  <td>nessus-core</td>
  <td>2.2.10</td>
  <td>54866</td>
  <td>1413</td>
  <td>not analyzed</td>
  <td>8</td>
</tr>
<tr>
  <td>nessus-plugins</td>
  <td>2.2.10</td>
  <td>4672</td>
  <td>299</td>
  <td>not analyzed</td>
  <td>not analyzed</td>
</tr>
<tr>
  <td>nessus-client</td>
  <td>1.0.2</td>
  <td>51383</td>
  <td>864</td>
  <td>not analyzed</td>
  <td>21</td>
</tr>
</table>
