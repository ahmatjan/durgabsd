m4_dnl -*-html-*-
m4_include(`template.m4')

m4_dnl OpenVAS
m4_dnl $Id$
m4_dnl Description: OpenVAS Change Request #15
m4_dnl
m4_dnl Authors:
m4_dnl Jan-Oliver Wagner <jan-oliver.wagner@intevation.de>
m4_dnl
m4_dnl Copyright:
m4_dnl Copyright (C) 2008 Intevation GmbH
m4_dnl
m4_dnl This program is free software; you can redistribute it and/or
m4_dnl modify it under the terms of the GNU General Public License
m4_dnl as published by the Free Software Foundation; either version 2
m4_dnl of the License, or (at your option) any later version.
m4_dnl
m4_dnl This program is distributed in the hope that it will be useful,
m4_dnl but WITHOUT ANY WARRANTY; without even the implied warranty of
m4_dnl MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
m4_dnl GNU General Public License for more details.
m4_dnl
m4_dnl You should have received a copy of the GNU General Public License
m4_dnl along with this program; if not, write to the Free Software
m4_dnl Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.

m4_define(`EN')
m4_define(`TITLE', `OpenVAS')
m4_define(`MAIN', `misc')



PAGE_START
<h2>OpenVAS Change Request #15: OpenVAS Server: Remove features for detached scans</h2>

Status: Voted +4. Done. Implemented with SVN revision 1118.

<h3>Purpose</h3>

<p>
  To reduce and cleanup code base of OpenVAS Server.
</p>

<p>
  To remove a broken design.
</p>

<h3>References</h3>

<p>
<a href="openvas-cr-12.html">OpenVAS Change Request #12: Replace NTP with OTP</a>: The present Change Request
would add to #12, because additional changes to OTP are proposed.
</p>

<h3>Rationale</h3>

<p>
  "Detached Scans" is a feature inherited from Nessus that offers to
  have the server manage scans without permanent connection to the client
  and to have server-side storage of results.
  It seems that no client supported this feature fully, at least
  the (half-implemented) support was removed/deprecated from the client already
  in the Nessus times.
</p>

<p>
The present version of OpenVAS Server appears to not write any results
of a detached scan nor does it deliver any session IDs when asked.
So, at least the current implementation is at least buggy anyway.
</p>

<p>
  In fact, this idea of detached scans is regarded a broken design.
  The actual scan server should not care about caching results and implementing
  a complex protocol to manage things stored on server side.
</p>

<p>
  This is rather to be implemented by a tier of its own as a manangement layer
  e.g. as a web application or even a more low level service.
  After all it should be a code base of its own and would act as a OpenVAS
  client running with less system rights (no root rights required).
  However, this change request is not about implementing the management unit,
  but about getting this feature out of the actual server.
</p>

<h3>Effects</h3>

<p>
Any client implementations that indeed uses this feature will not
work anymore (none known so far).
</p>

<p>
The OpenVAS server itself will not allow for continous scans anymore.
</p>

<p>
The command line version of OpenVAS-Client will not anymore offer
the respective commands line option for detached scans.
</p>

<p>
The changes will reduce the number of commands of the client-server
protocol and need to be considered for the upcoming OTP 1.0 protocol.
</p>

<h3>Design and Implementation</h3>

<p>
This change would be integrated into the upcoming OTP 1.0 protocol and
remove the commands DETACHED_SESSIONS_LIST and DETACHED_STOP and the preferences
detached_scan, continuous_scan, delay_between_scan_loops,
and  detached_scan_email_address.
</p>

<p>
It does make sense to have this change only be applied to new
major release series openvas-server 1.1.
</p>

<p>
Apart from the protocol changes, there are also many code cleanups
to do (removal of the handling for detached scans) in both server and client,
but not yet listed here in detail.
</p>


<h3>History</h3>

<ul>
<li> 2010-01-06 Felix Wolfsteller &lt;felix.wolfsteller@intevation.de&gt;:<br>
     Updated status as done.</li>
<li> 2008-08-08 Jan-Oliver Wagner &lt;jan-oliver.wagner@intevation.de&gt;:<br>
     Updated status: implemented.<br>
     Updated description: Mentioning continous scans and reducing the list of
     dropped protocol elements to the ones that directly relate to the
     detached scan feature.
<li> 2008-07-10 Jan-Oliver Wagner &lt;jan-oliver.wagner@intevation.de&gt;:<br>
     Added voting result.
<li> 2008-07-03 Jan-Oliver Wagner &lt;jan-oliver.wagner@intevation.de&gt;:<br>
     Initial text.</li>
</ul>
