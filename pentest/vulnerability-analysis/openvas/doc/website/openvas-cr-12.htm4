m4_dnl -*-html-*-
m4_include(`template.m4')

m4_dnl OpenVAS
m4_dnl $Id$
m4_dnl Description: OpenVAS Change Request #12
m4_dnl
m4_dnl Authors:
m4_dnl Jan-Oliver Wagner <jan-oliver.wagner@intevation.de>
m4_dnl
m4_dnl Copyright:
m4_dnl Copyright (C) 2008 Intevation GmbH
m4_dnl
m4_dnl This program is free software; you can redistribute it and/or
m4_dnl modify it under the terms of the GNU General Public License
m4_dnl as published by the Free Software Foundation; either version 2
m4_dnl of the License, or (at your option) any later version.
m4_dnl
m4_dnl This program is distributed in the hope that it will be useful,
m4_dnl but WITHOUT ANY WARRANTY; without even the implied warranty of
m4_dnl MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
m4_dnl GNU General Public License for more details.
m4_dnl
m4_dnl You should have received a copy of the GNU General Public License
m4_dnl along with this program; if not, write to the Free Software
m4_dnl Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.

m4_define(`EN')
m4_define(`TITLE', `OpenVAS')
m4_define(`MAIN', `misc')



PAGE_START
<h2>OpenVAS Change Request #12: Replace NTP with OTP</h2>

Status: Voted +2. Done; OTP has replaced NTP starting with the 2.0-beta1 releases.

<h3>Purpose</h3>

<p>
To facilitate improvements to the communication protocol between client and server.
</p>

<h3>References</h3>

<p>
<a href="http://lists.wald.intevation.org/pipermail/openvas-devel/2008-June/000692.html">Discussion on openvas-devel mailing list</a>.
</p>

<h3>Rationale</h3>

<p>
OpenVAS still uses NTP, the communication protocol inherited from Nessus. This prevents improvements
to the communication between client and server that require changes to the protocol as those changes
would break compatibility with Nessus servers/clients and the NTP protocol.
</p>

<p>
Since OpenVAS is a fork of the Nessus project, implementing these changes in a new protocol version is
not an option; a NTP 1.3 protocol created by OpenVAS would probably differ from a NTP 1.3 protocol created
by Nessus. This would lead to unnecessary confusion for users of this protocol. To avoid this confusion and
to reflect the changes to the protocol it has been proposed to change the protocol name to OTP (OpenVAS
Transfer Protocol).
</p>

<p>
The OpenVAS-Server already no longer fully implements the NTP specification; for example, the NESSUS_VERSION 
command was removed and an OPENVAS_VERSION command added. To clarify this and to avoid confusion with
communication partners expecting a pure implementation of NTP in OpenVAS, the communication protocol should be
renamed to signify these changes.
</p>



<h3>Effects</h3>

<ul>
<li>It should be noted that this will not break compatibility with clients which are using the NTP protocol for
communication with OpenVAS-Server. Since the client proposes the communication protocol, OpenVAS-Server could
continue to provide legacy NTP support for older clients while at the same time offering improved capabilities to
clients supporting OTP.</li>

<li>It will however break compatibility between OpenVAS-Client and servers not supporting OTP as the client is only
able to propose one protocol version at the start of the communication. If this compatibility is desired it could be
implemented by providing an option to set the desired protocol in the client.
</ul>

<h3>Design and Implementation</h3>

<ul>
<li> Write a specification for OTP explaining the changes made since NTP 1.2. The initial set of changes would
consist of:<ul><li>Changing NESSUS_VERSION to OPENVAS_VERSION</li><li>Removing the handling of ATTACHED_PLUGINS</li>
<li>Adding message classes LOG and DEBUG</li></ul>
</li>

<li> Change communication implementation in both client and server; OpenVAS-Client should now request the
communication protocol "OTP/1.0". The OpenVAS-Server should be able to understand this request and
to communicate with the client using OTP.</li>

</ul>

<h3>History</h3>

<ul>
<li> 2008-10-21 Michael Wiegand &lt;michael.wiegand@intevation.de&gt;:<br>
     Updated status.
<li> 2008-06-24 Michael Wiegand &lt;michael.wiegand@intevation.de&gt;:<br>
     Updated status.
<li> 2008-06-18 Jan-Oliver Wagner &lt;jan-oliver.wagner@intevation.de&gt;:<br>
     Added voting result.
<li> 2008-06-12 Michael Wiegand &lt;michael.wiegand@intevation.de&gt;:<br>
     Initial text.</li>
</ul>
