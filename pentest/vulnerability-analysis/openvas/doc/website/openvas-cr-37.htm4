m4_dnl -*-html-*-
m4_include(`template.m4')

m4_dnl OpenVAS
m4_dnl $Id$
m4_dnl Description: OpenVAS Change Request #37
m4_dnl
m4_dnl Authors:
m4_dnl Jan-Oliver Wagner <jan-oliver.wagner@intevation.de>
m4_dnl Felix Wolfsteller <felix.wolfsteller@intevation.de>
m4_dnl
m4_dnl Copyright:
m4_dnl Copyright (C) 2009 Intevation GmbH
m4_dnl
m4_dnl This program is free software; you can redistribute it and/or
m4_dnl modify it under the terms of the GNU General Public License
m4_dnl as published by the Free Software Foundation; either version 2
m4_dnl of the License, or (at your option) any later version.
m4_dnl
m4_dnl This program is distributed in the hope that it will be useful,
m4_dnl but WITHOUT ANY WARRANTY; without even the implied warranty of
m4_dnl MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
m4_dnl GNU General Public License for more details.
m4_dnl
m4_dnl You should have received a copy of the GNU General Public License
m4_dnl along with this program; if not, write to the Free Software
m4_dnl Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.

m4_define(`EN')
m4_define(`TITLE', `OpenVAS')
m4_define(`MAIN', `misc')



PAGE_START
<h2>OpenVAS Change Request #37: Make openvas-client depend on openvas-libraries</h2>

Status: Voted +6. Done. Released with openvas-client and openvas-libraries 3.0.0.

<h3>Purpose</h3>

<p>
  To avoid comprehensive code duplicates and associated maintenance work.
</p>

<p>
  To allow code cleanup and removal of code redundancy.
</p>

<h3>References</h3>

<p>
</p>

<h3>Rationale</h3>

<p>
Currently openvas-client is independent of any other OpenVAS module.
Since it shares some code base with the other modules, copies of various
files from openvas-libraries are inside the openvas-client module.
</p>

<p>
As openvas-client deals with similar 'entities' (e.g. NVTs, reported
issues) as openvas-server and openvas-libraries, there exist

<ul>
  <li> exact code duplicates (same files, e.g. every file in src/openvas-lib),
      </li>
  <li> nearly exact code duplicates or extracts (e.g. arglists, network related
    functions) and </li>
  <li> secondary, separate implementations of functionality (e.g. file- related
    functions, parsing), </li>
</ul>

which makes maintenance harder and can require double debugging efforts.
</p>

<p>
  Current developments (e.g. openvas-manager, logging facility) in the 2.1
series will likely introduce more general code that could and should be used by
openvas-client.
</p>

<h3>Effects</h3>

<p>
For compilation or installation of OpenVAS-Client, presence of openvas-libraries
will be a strict requirement.
</p>

<h3>Design and Implementation</h3>

<h4>Changes to openvas-client</h4>

<ul>
<li> Change autoconf to strictly require openvas-libraries.</li>
<li> Identify and remove affected files and code parts (see preliminary list
     below).</li>
</ul>

<h4>Changes to openvas-libraries</h4>

<ul>
<li> For nearly exact code duplicates and separate implementations, changes from
     openvas-client have to be merged in and tested carefully. </li>
</ul>


<h4>Incomplete list of affected files in openvas-client</h4>
The files counterparts in libopenvas are given in braces.
<ul>
  <li>openvas-client/libnessus/addslashes.* (openvas-libraries/libopenvas/plugutils.*)</li>
  <li>openvas-client/libnessus/arglists.* (openvas-libraries/libopenvas/arglists.*)</li>
  <li>openvas-client/libnessus/harglists.* (openvas-libraries/libopenvas/harglists.*)</li>
  <li>openvas-client/libnessus/hlst.* (openvas-libraries/libopenvas/hlst.*)</li>
  <li>openvas-client/libnessus/network.* (openvas-libraries/libopenvas/network.*)</li>
  <li>openvas-client/libnessus/rand.* (openvas-libraries/libopenvas/rand.*)</li>
  <li>openvas-client/libnessus/resolve.* (openvas-libraries/libopenvas/resolve.*)</li>
  <li>openvas-client/libnessus/system.* (openvas-libraries/libopenvas/system.*)</li>
  <li>openvas-client/include/libnessus.h</li>
  <li>openvas-client/src/hash_table_file.* (openvas-libraries/libopenvas/hash_table_file.*)</li>
  <li>openvas-client/src/openvas_certificates.* (openvas-libraries/libopenvas/openvas_certificates.*)</li>
  <li>openvas-client/src/openvas_certificate_file.* (openvas-libraries/libopenvas/openvas_certificate_file.*)</li>
  <li>openvas-client/src/openvas_ssh_login.* (openvas-libraries/libopenvas/openvas_ssh_login.*)</li>
</ul>
</p>

<h3>History</h3>

<ul>
<li> 2010-01-06 Felix Wolfsteller &lt;felix.wolfsteller@intevation.de&gt;:<br>
     Updated status as done.</li>
<li> 2009-07-12 Felix Wolfsteller &lt;felix.wolfsteller@intevation.de&gt;:<br>
     Corrected typos found by Jan-Oliver Wagner and Matthew Mundell.</li>
<li> 2009-07-02 Felix Wolfsteller &lt;felix.wolfsteller@intevation.de&gt; and Jan-Oliver Wagner &lt;jan-oliver.wagner@intevation.de&gt;:<br>
     Enhanced structure and readability.</li>
<li> 2009-06-29 Felix Wolfsteller &lt;felix.wolfsteller@intevation.de&gt;:<br>
     Initial text.</li>
</ul>
