m4_dnl -*-html-*-
m4_include(`template.m4')

m4_dnl OpenVAS
m4_dnl $Id$
m4_dnl Description: OpenVAS Change Request #36
m4_dnl
m4_dnl Authors:
m4_dnl Jan-Oliver Wagner <jan-oliver.wagner@greenbone.net>
m4_dnl
m4_dnl Copyright:
m4_dnl Copyright (C) 2009 Greenbone Networks GmbH
m4_dnl
m4_dnl This program is free software; you can redistribute it and/or
m4_dnl modify it under the terms of the GNU General Public License
m4_dnl as published by the Free Software Foundation; either version 2
m4_dnl of the License, or (at your option) any later version.
m4_dnl
m4_dnl This program is distributed in the hope that it will be useful,
m4_dnl but WITHOUT ANY WARRANTY; without even the implied warranty of
m4_dnl MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
m4_dnl GNU General Public License for more details.
m4_dnl
m4_dnl You should have received a copy of the GNU General Public License
m4_dnl along with this program; if not, write to the Free Software
m4_dnl Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.

m4_define(`EN')
m4_define(`TITLE', `OpenVAS')
m4_define(`MAIN', `misc')



PAGE_START
<h2>OpenVAS Change Request #36: NASL: Remove current i18n concept</h2>

<p>
Status: Voted +7. Done.
</p>

<h3>Purpose</h3>

<p>
To get rid of a unmaintainable concept for internationalization (i18n) of NVT descriptions.
</p>

<p>
To lower the amount of source code lines and code complexity of NASL scripts.
</p>

<p>
To prepare for a realistic concept for i18n.
</p>

<h3>References</h3>

<p>
<a href="http://lists.wald.intevation.org/pipermail/openvas-plugins/2009-July/000372.html">Automatic
clean-up script by Markus Schröders on openvas-plugins</a>
</p>

<h3>Rationale</h3>

<p>
Currently, the description part of NASL scripts allows
to specify strings in different languages via script_name(),
script_description(), script_summary(), script_copyright()
and script_family().
</p>

<p>
The translations are defined in the same code which is regarded
a broken concept. Approving a script change can't be done
for languages not understood. English is the only realistic
basis as it is the generally used language in the area of
IT security.
</p>

<p>
In fact, i18n support should work in the same way
as the classic gettext works: mark strings that
can be translated and have translation tables outside
of the actual code. Changed strings automatically
will lead to invalidation of translation until these
are updated manually.
</p>

<p>
Before introducing a real solution for i18n, the broken concept
needs to be removed entirely from the code base.
</p>

<h3>Effects</h3>

<p>
With regard to translated strings, almost no effect is expected
because it was already hard-coded to use English.
Only personal NASL scripts that did not specify any English
texts will cause an effect for the user.
</p>

<p>
Considerable reduction of code volume, perhaps some speedup
for launch of openvasd.
</p>

<h3>Design and Implementation</h3>

<p>
Since OpenVAS 1.0, a default fall-back is implemented in a
way that instead of e.g. set_description(english:"text", francais:"test")
also set_description("text") will do the same.
Thus, any i18n elements in the NASL source codes can be removed.
However, this should be done step by step to have readable svn commits,
e.g. first all German and Portuguese strings, then any French, then
the superfluous "desc["english"]=" style and finally the "english=" parameters.
The scripts by Markus Schröder should mostly automatize this task.
</p>

<p>
Once the NASL scripts are cleaned up, the module openvas-libnasl can be
adapted as well. However, this should be introduced for the 2.1 branch to
ensure consistent behaviour for 1-0 and 2.0 branches.
</p>

<p>
Finally, documentation and sample files should be updated accordingly.
</p>

<h3>History</h3>

<ul>
<li> 2010-01-06 Felix Wolfsteller &lt;felix.wolfsteller@intevation.de&gt;:<br>
     Updated status as done.</li>
<li> 2009-07-27 Felix Wolfsteller &lt;felix.wolfsteller@intevation.de&gt;:<br>
     Updated reference to script, minor typo fixes.</li>
<li> 2009-06-26 Michael Wiegand &lt;michael.wiegand@greenbone.net&gt;:<br>
     Updated status with voting results.</li>
<li> 2009-06-23 Jan-Oliver Wagner &lt;jan-oliver.wagner@greenbone.net&gt;:<br>
     Initial text.</li>
</ul>
