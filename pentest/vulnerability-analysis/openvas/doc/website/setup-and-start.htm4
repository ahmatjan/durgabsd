m4_dnl -*-html-*-
m4_include(`template.m4')

m4_dnl OpenVAS
m4_dnl $Id$
m4_dnl Description: How to setup and start OpenVAS
m4_dnl
m4_dnl Authors:
m4_dnl Jan-Oliver Wagner <jan-oliver.wagner@greenbone.net>
m4_dnl Michael Wiegand <michael.wiegand@greenbone.net>
m4_dnl
m4_dnl Copyright:
m4_dnl Copyright (C) 2010, 2012 Greenbone Networks GmbH
m4_dnl
m4_dnl This program is free software; you can redistribute it and/or
m4_dnl modify it under the terms of the GNU General Public License
m4_dnl as published by the Free Software Foundation; either version 2
m4_dnl of the License, or (at your option) any later version.
m4_dnl
m4_dnl This program is distributed in the hope that it will be useful,
m4_dnl but WITHOUT ANY WARRANTY; without even the implied warranty of
m4_dnl MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
m4_dnl GNU General Public License for more details.
m4_dnl
m4_dnl You should have received a copy of the GNU General Public License
m4_dnl along with this program; if not, write to the Free Software
m4_dnl Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.

m4_define(`EN')
m4_define(`DE_FILE', `setup-and-start-de.html')
m4_define(`MAIN', `tryout')
m4_define(`TITLE', `Setup and Start OpenVAS')

PAGE_START
<h2>Setup and Start OpenVAS</h2>

<h3>Is OpenVAS set up correctly?</h3>

<p>
The OpenVAS developers provide a handy tool called <b>openvas-check-setup</b> to
check the state of your OpenVAS installation. To use this tool simply follow
these three steps:
</p>
<ol>
<li>Download the latest version of
<a
href="https://svn.wald.intevation.org/svn/openvas/trunk/tools/openvas-check-setup">openvas-check-setup</a>.</li>
<li>Ensure that the script is executable:
<pre>chmod +x openvas-check-setup</pre></li>
<li>Execute the script:
<pre>./openvas-check-setup</pre>
for current stable release or
<pre>./openvas-check-setup [ --v4 | --v5 | --v6 | ... ]</pre>
for other respective OpenVAS releases.
</li>
</ol>

<p>
openvas-check-setup will now analyze the state of your OpenVAS installation
and propose fixes should it detect any errors or misconfigurations. It will also
check if all required OpenVAS services are running and listening on the correct
ports.
</p>

<p>
In case the hints did not help you to get a working OpenVAS installation,
please report the problem to us and we will update/fix openvas-check-setup:
<a href="http://lists.wald.intevation.org/mailman/listinfo/openvas-discuss">OpenVAS Users Mailing List</a>.
</p>

<p>
If you want to install the OpenVAS services on a server and you do not need
clients like OpenVAS CLI or GSD in your installation you can skip the checks for
these modules by starting openvas-check-setup with the --server parameter
instead:
</p>

<pre>
./openvas-check-setup --server
</pre>

<h3>Examples of openvas-check-setup results</h3>

<p>
The following two examples show what openvas-check-setup will check and how it
will assist you in making you OpenVAS installation complete.
</p>

<h4>
First run:
</h4>

<pre>
openvas-check-setup 2.0.1
  Test completeness and readiness of OpenVAS-4

  Please report us any non-detected problems and
  help us to improve this check routine:
  http://lists.wald.intevation.org/mailman/listinfo/openvas-discuss

  Send us the log-file (/tmp/openvas-check-setup.log) to help analyze the problem.

  Use the parameter --server to skip checks for client tools
  like GSD and OpenVAS-CLI.

Step 1: Checking OpenVAS Scanner ... 
        OK: OpenVAS Scanner is present in version 3.2.3.
        OK: OpenVAS Scanner CA Certificate is present as /var/lib/openvas/CA/cacert.pem.
        OK: NVT collection in /var/lib/openvas/plugins contains 20380 NVTs.
Step 2: Checking OpenVAS Manager ... 
        OK: OpenVAS Manager is present in version 3.0.0.
        OK: OpenVAS Manager client certificate is present as /var/lib/openvas/CA/clientcert.pem.
        OK: OpenVAS Manager database found in /var/lib/openvas/mgr/tasks.db.
        OK: sqlite3 found, extended checks of the OpenVAS Manager installation enabled.
        OK: OpenVAS Manager database is at revision 42.
        OK: OpenVAS Manager expects database at revision 42.
        OK: Database schema is up to date.
        OK: xsltproc found.
Step 3: Checking OpenVAS Administrator ... 
        OK: OpenVAS Administrator is present in version 1.1.2.
        OK: At least one user exists.
        ERROR: No admin user found. You need to create at least one admin user to log in.
        FIX: Create a user using 'openvasad -c 'add_user' -n &lt;name&gt; -r Admin'

 ERROR: Your OpenVAS-4 installation is not yet complete!

Please follow the instructions marked with FIX above and run this
script again.

If you think this result is wrong, please report your observation
and help us to improve this check routine:
http://lists.wald.intevation.org/mailman/listinfo/openvas-discuss
Please attach the log-file (/tmp/openvas-check-setup.log) to help us analyze the problem.
</pre>

<h4>
Second run, after creating an admin user as described by openvas-check-setup:
</h4>

<pre>
openvas-check-setup 2.0.1
  Test completeness and readiness of OpenVAS-4

  Please report us any non-detected problems and
  help us to improve this check routine:
  http://lists.wald.intevation.org/mailman/listinfo/openvas-discuss

  Send us the log-file (/tmp/openvas-check-setup.log) to help analyze the problem.

  Use the parameter --server to skip checks for client tools
  like GSD and OpenVAS-CLI.

Step 1: Checking OpenVAS Scanner ... 
        OK: OpenVAS Scanner is present in version 3.2.3.
        OK: OpenVAS Scanner CA Certificate is present as /var/lib/openvas/CA/cacert.pem.
        OK: NVT collection in /var/lib/openvas/plugins contains 20380 NVTs.
Step 2: Checking OpenVAS Manager ... 
        OK: OpenVAS Manager is present in version 3.0.0.
        OK: OpenVAS Manager client certificate is present as /var/lib/openvas/CA/clientcert.pem.
        OK: OpenVAS Manager database found in /var/lib/openvas/mgr/tasks.db.
        OK: sqlite3 found, extended checks of the OpenVAS Manager installation enabled.
        OK: OpenVAS Manager database is at revision 42.
        OK: OpenVAS Manager expects database at revision 42.
        OK: Database schema is up to date.
        OK: xsltproc found.
Step 3: Checking OpenVAS Administrator ... 
        OK: OpenVAS Administrator is present in version 1.1.2.
        OK: At least one user exists.
        OK: At least one admin user exists.
Step 4: Checking Greenbone Security Assistant (GSA) ... 
        OK: Greenbone Security Assistant is present in version 3.0.0.
Step 5: Checking OpenVAS CLI ... 
        OK: OpenVAS CLI version 1.1.2.
Step 6: Checking Greenbone Security Desktop (GSD) ... 
        OK: Greenbone Security Desktop is present in Version 1.1.1.
Step 7: Checking if OpenVAS services are up and running ... 
        OK: netstat found, extended checks of the OpenVAS services enabled.
        OK: OpenVAS Scanner is running and listening on all interfaces.
        OK: OpenVAS Scanner is listening on port 9391, which is the default port.
        OK: OpenVAS Manager is running and listening on all interfaces.
        OK: OpenVAS Manager is listening on port 9390, which is the default port.
        OK: OpenVAS Administrator is running and listening on all interfaces.
        OK: OpenVAS Administrator is listening on port 9393, which is the default port.
        OK: Greenbone Security Assistant is running and listening on all interfaces.
        OK: Greenbone Security Assistant is listening on port 9392, which is the default port.

It seems like your OpenVAS-4 installation is OK.

If you think it is not OK, please report your observation
and help us to improve this check routine:
http://lists.wald.intevation.org/mailman/listinfo/openvas-discuss
Please attach the log-file (/tmp/openvas-check-setup.log) to help us analyze the problem.
</pre>

